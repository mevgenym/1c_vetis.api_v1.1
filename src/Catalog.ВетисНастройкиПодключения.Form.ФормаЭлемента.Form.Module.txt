
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ОсновнаяНастройка = ВетисПовтИсп.Настройки_ОсновнаяНастройка();
	
	Элементы.ФормаКомандаОсновная.Пометка = ОсновнаяНастройка = Объект.Ссылка;
	
КонецПроцедуры

&НаСервере
Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	
	//Ветис.Настройки_ОсновнойХС(Объект.BusinessEntity);
	
КонецПроцедуры

&НаСервере
Процедура ПослеЗаписиНаСервере(ТекущийОбъект, ПараметрыЗаписи)
	
	Ветис.ИнициализироватьНастройкиПодключения();
	
КонецПроцедуры


&НаКлиенте
Процедура Декорация1Нажатие(Элемент)
	
	НачатьЗапускПриложения(Новый ОписаниеОповещения("ОбработкаОповещения", ЭтаФорма), Элемент.Заголовок);
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаОповещения(Результат, Параметр) Экспорт
	
КонецПроцедуры
&НаКлиенте
Процедура КомандаЗаполнитьХС(Команда)
	
	Если Модифицированность Тогда
		Сообщить("Перед заполнением необходимо сохранить изменения");
		Возврат;
	КонецЕсли;
	
	КомандаЗаполнитьХСНаСервере();
	
КонецПроцедуры

&НаСервере
Процедура КомандаЗаполнитьХСНаСервере()
	
	Для каждого _Строка Из Объект.ИдентификаторыХС Цикл
		_Строка.BusinessEntity = ВетисDictionaryСлой1с.BusinessEntity(_Строка.issuerID);
	КонецЦикла;
	
	Модифицированность = Истина;
	
КонецПроцедуры


&НаКлиенте
Процедура КомандаОсновнойХС(Команда)
	
	Объект.BusinessEntity = Элементы.ИдентификаторыХС.ТекущиеДанные.BusinessEntity;
	
	Модифицированность = Истина;
	
	Элементы.ИдентификаторыХС.Обновить();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаОсновная(Команда)
	
	Если ЗначениеЗаполнено(Объект.Ссылка) И НЕ Объект.Ссылка = ОсновнаяНастройка Тогда
		ВетисВызовСервера.Настройки_ОсновнаяНастройка(Объект.Ссылка);
		ОсновнаяНастройка = Объект.Ссылка;
		Элементы.ФормаКомандаОсновная.Пометка = ОсновнаяНастройка = Объект.Ссылка;
	КонецЕсли;
	
КонецПроцедуры
