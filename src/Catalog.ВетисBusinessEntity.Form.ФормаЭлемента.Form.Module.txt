
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
КонецПроцедуры


&НаКлиенте
Процедура КомандаЗаполнитьИзСервиса(Команда)
	
	Перем _Ошибка, _Отказ;
	
	ЗаполнитьИзСервиса(_Отказ, _Ошибка);
	
	Если _Отказ = Истина Тогда
		Сообщить(_Ошибка);
	Иначе
		Модифицированность = Истина;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьИзСервиса(пОтказ, пОшибка)
	
	Если Ветис.Версия_2_0() Тогда
		
		Если ПустаяСтрока(Объект.guid) Тогда
			пОтказ = Истина;
			пОшибка = "ХС не сопоставлен";
			Возврат;
		КонецЕсли;
		
		_BE = ВетисEnterpriseService_2_0.GetBusinessEntityByGuid(Объект.guid, пОтказ, пОшибка);
		
		Если пОтказ = Истина Тогда
			Возврат;
		КонецЕсли;
		
	Иначе
		
		Если ПустаяСтрока(Объект.guid) Тогда
			пОтказ = Истина;
			пОшибка = "ХС не сопоставлен";
			Возврат;
		КонецЕсли;
		
		_BE = ВетисEnterpriseService.GetBusinessEntityByGuid(Объект.guid, пОтказ, пОшибка);
		
		Если пОтказ = Истина Тогда
			Возврат;
		КонецЕсли;
		
	КонецЕсли;
	
	_Объект = РеквизитФормыВЗначение("Объект");
	
	_Объект.Заполнить(_BE);
	
	ЗначениеВРеквизитФормы(_Объект, "Объект");
	
КонецПроцедуры
