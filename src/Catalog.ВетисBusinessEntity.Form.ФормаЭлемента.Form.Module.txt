
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	уид = Объект.Ссылка.УникальныйИдентификатор();
	
	ЗаполнитьРеквизиты(Объект);
	
КонецПроцедуры


&НаКлиенте
Процедура КомандаЗаполнитьИзСервиса(Команда)
	
	Перем _Ошибка, _Отказ;
	
	КомандаЗаполнитьИзСервисаНаСервере(_Отказ, _Ошибка);
	
	Если _Отказ = Истина Тогда
		Сообщить(_Ошибка);
	Иначе
		Модифицированность = Истина;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура КомандаЗаполнитьИзСервисаНаСервере(пОтказ, пОшибка)
	
	_guid = Строка(Объект.Ссылка.УникальныйИдентификатор());
	
	_be = ВетисEnterpriseService.GetBusinessEntityByGuid(_guid, пОтказ, пОшибка);
	
	Если пОтказ = Истина Тогда
		Возврат;
	КонецЕсли;
	
	Модифицированность = Истина;
	
	_Объект = РеквизитФормыВЗначение("Объект");
	
	_Объект.Заполнить(_be);
	
	ЗначениеВРеквизитФормы(_Объект, "Объект");
	
	ЗаполнитьРеквизиты(_be);
	
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьРеквизиты(value)
	
	last     = value.last;
	active   = value.active;
	
	Если ТипЗнч(value) = Тип("ОбъектXDTO") Тогда
		status   = ВетисBaseСлой1с.VersionStatus(value.Status);
		_uuid    = value.uuid;
		next     = value.next;
		previous = value.previous;
		createDate = value.createDate;
		updateDate = value.updateDate;
	Иначе
		status   = value.Status;
	КонецЕсли;
	
КонецПроцедуры
