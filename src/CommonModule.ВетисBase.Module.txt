
// тип, описывающий параметры запрашиваемого у сервиса списка объектов
Функция ListOptions(Count = Неопределено, Offset = Неопределено) Экспорт
	
	Если Ложь Тогда
	ИначеЕсли Ветис.Версия_2_1() Тогда
		Возврат ListOptions_1_4(Count, Offset);
	ИначеЕсли Ветис.Версия_2_0() Тогда
		Возврат ListOptions_1_4(Count, Offset);
	ИначеЕсли Ветис.Версия_1_4() Тогда
		Возврат ListOptions_1_4(Count, Offset);
	Иначе
		ВетисОбщегоНазначения.ВывестиСообщение(Ветис.ВерсияТекстОшибки());
		ВызватьИсключение Ветис.ВерсияТекстОшибки();
	КонецЕсли;
	
КонецФункции
Функция ListOptions_1_4(count = Неопределено, offset = Неопределено)
	
	_Объект = Создать("ListOptions");
	
	_Объект.count = ?(count = Неопределено, Ветис.Настройки_КоличествоОбъектовВСписке(), count);
	_Объект.offset = ?(offset = Неопределено, 0, offset);
	
	Возврат _Объект;
	
КонецФункции

// тип, описывающий дату и время
// преобразует дату 1с в xd и обратно
Функция ComplexDate(Object, HourNeed = Ложь) Экспорт
	
	Возврат ВетисDictionary.ComplexDate(Object, HourNeed);
	
КонецФункции

//Тип, описывающий интервал дат. 
//Параметры:
// beginDate - Начальная дата интервала xs:dateTime
// endDate - Конечная дата интервала xs:dateTime
Функция DateInterval(BeginDate = Неопределено, EndDate = Неопределено) Экспорт
	
	Если Ложь Тогда
	ИначеЕсли Ветис.Версия_2_1() Тогда
		Возврат DateInterval_1_4(BeginDate, EndDate);
	ИначеЕсли Ветис.Версия_2_0() Тогда
		Возврат DateInterval_1_4(BeginDate, EndDate);
	ИначеЕсли Ветис.Версия_1_4() Тогда
		Возврат DateInterval_1_4(BeginDate, EndDate);
	Иначе
		ВетисОбщегоНазначения.ВывестиСообщение(Ветис.ВерсияТекстОшибки());
		ВызватьИсключение Ветис.ВерсияТекстОшибки();
	КонецЕсли;
	
КонецФункции
Функция DateInterval_1_4(beginDate = Неопределено, endDate = Неопределено)
	
	_Объект = Создать("DateInterval");
	
	ВетисОбщегоНазначения.УстановитьЗначение(_Объект, beginDate, "beginDate", "Ветис.ВремяСервиса", Дата(1,1,1));// xs:dateTime
	ВетисОбщегоНазначения.УстановитьЗначение(_Объект, endDate, "endDate", "Ветис.ВремяСервиса");// xs:dateTime
	
	Возврат _Объект;
	
КонецФункции

// тип, описывающий тип операции на изменение реестра
Функция RegisterModificationType(Type) Экспорт
	
	Если Ложь Тогда
	ИначеЕсли Ветис.Версия_2_1() Тогда
		Возврат RegisterModificationType_1_4(Type);
	ИначеЕсли Ветис.Версия_2_0() Тогда
		Возврат RegisterModificationType_1_4(Type);
	ИначеЕсли Ветис.Версия_1_4() Тогда
		Возврат RegisterModificationType_1_4(Type);
	Иначе
		ВетисОбщегоНазначения.ВывестиСообщение(Ветис.ВерсияТекстОшибки());
		ВызватьИсключение Ветис.ВерсияТекстОшибки();
	КонецЕсли;
	
КонецФункции
Функция RegisterModificationType_1_4(type)
	
	Если      type = 1 Тогда
		Возврат ВетисКонстанты.RegisterModificationType_FIND_OR_CREATE();
	ИначеЕсли type = 2 Тогда
		Возврат ВетисКонстанты.RegisterModificationType_FIND_OR_CREATE();
	ИначеЕсли type = 3 Тогда
		Возврат ВетисКонстанты.RegisterModificationType_UPDATE();
	ИначеЕсли type = 4 Тогда
		Возврат ВетисКонстанты.RegisterModificationType_DELETE();
	ИначеЕсли type = 5 Тогда
		Возврат ВетисКонстанты.RegisterModificationType_MERGE();
	ИначеЕсли type = 6 Тогда
		Возврат ВетисКонстанты.RegisterModificationType_ATTACH();
	ИначеЕсли type = 7 Тогда
		Возврат ВетисКонстанты.RegisterModificationType_SPLIT();
	ИначеЕсли type = 8 Тогда
		Возврат ВетисКонстанты.RegisterModificationType_FORK();
	Иначе
		Возврат Неопределено;
	КонецЕсли;
	
КонецФункции


Функция Создать(Name, Factory = Неопределено) Экспорт
	
	Возврат ВетисОбщегоНазначения.Создать(Name, URI(), Factory);
	
КонецФункции

Функция ServiceURI(ver = Неопределено) Экспорт
	
	Если Ложь Тогда
	ИначеЕсли Ветис.Версия_2_1(ver) Тогда
		Возврат "http://api.vetrf.ru/schema/cdm/base/ws-definitions";
	ИначеЕсли Ветис.Версия_2_0(ver) Тогда
		Возврат "http://api.vetrf.ru/schema/cdm/base/ws-definitions";
	ИначеЕсли Ветис.Версия_1_4(ver) Тогда
		Возврат "http://api.vetrf.ru/schema/cdm/base/ws-definitions";
	Иначе
		Возврат Неопределено;
	КонецЕсли;
	
КонецФункции

Функция URI(ver = Неопределено) Экспорт
	
	Если Ложь Тогда
	ИначеЕсли Ветис.Версия_2_1(ver) Тогда
		Возврат "http://api.vetrf.ru/schema/cdm/base";
	ИначеЕсли Ветис.Версия_2_0(ver) Тогда
		Возврат "http://api.vetrf.ru/schema/cdm/base";
	ИначеЕсли Ветис.Версия_1_4(ver) Тогда
		Возврат "http://api.vetrf.ru/schema/cdm/base";
	Иначе
		Возврат Неопределено;
	КонецЕсли;
	
КонецФункции

