
Процедура ОбработкаЗаполнения(ДанныеЗаполнения, ТекстЗаполнения, СтандартнаяОбработка)
	
	Если ТипЗнч(ДанныеЗаполнения) = Тип("ОбъектXDTO") Тогда
		ПометкаУдаления = Ложь;
		guid         = ДанныеЗаполнения.guid;
		last         = ДанныеЗаполнения.last;
		active       = ДанныеЗаполнения.active;
		status       = ВетисBaseСлой1с.VersionStatus(ДанныеЗаполнения.Status);
		Наименование = СокрЛП(ДанныеЗаполнения.text);
		referenceNumber = ДанныеЗаполнения.referenceNumber;
		text = СокрЛП(ДанныеЗаполнения.text);
		strict = ДанныеЗаполнения.strict;
		
		Заболевания.Очистить();
		Для каждого _relatedDisease Из ДанныеЗаполнения.relatedDisease Цикл
			_ЗаболеваниеСсылка = Справочники.ВетисAnimalDisease.ПолучитьСсылку(Новый УникальныйИдентификатор(_relatedDisease.guid));
			_Заболевание = _ЗаболеваниеСсылка.ПолучитьОбъект();
			Если _Заболевание = Неопределено Тогда
				_Заболевание = Справочники.ВетисAnimalDisease.СоздатьЭлемент();
				_Заболевание.УстановитьСсылкуНового(_ЗаболеваниеСсылка);
				_Заболевание.Заполнить(_relatedDisease);
				_Заболевание.Записать();
			КонецЕсли;
			_ТаблицаЗаболеванияСтрока = Заболевания.Добавить();
			_ТаблицаЗаболеванияСтрока.Заболевание = _ЗаболеваниеСсылка;
		КонецЦикла;
	КонецЕсли;
	
КонецПроцедуры
