
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Элементы.guid.Видимость = Ветис.Настройки_ПоказыватьGuid();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаДобавитьВСервисе(Команда)
	
	Перем _Отказ, _Ошибка;
	
	ModifyProducerStock("Добавить");
	
	Если _Отказ = Истина Тогда
		Сообщить(_Ошибка);
		Возврат;
	КонецЕсли;
	
	Элементы.Список.Обновить();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаИзменитьВСервисе(Команда)
	
	Перем _Отказ, _Ошибка;
	
	ModifyProducerStock("Изменить");
	
	Если _Отказ = Истина Тогда
		Сообщить(_Ошибка);
		Возврат;
	КонецЕсли;
	
	Элементы.Список.Обновить();
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаУдалитьВСервисе(Команда)
	
	Перем _Отказ, _Ошибка;
	
	ModifyProducerStock("Удалить");
	
	Если _Отказ = Истина Тогда
		Сообщить(_Ошибка);
		Возврат;
	КонецЕсли;
	
	Элементы.Список.Обновить();
	
КонецПроцедуры

Процедура ModifyProducerStock(ТипОперации, пОтказ = Ложь, пОшибка = "")
	
	Если ТипОперации = "Добавить" Тогда
		_Type = ВетисКонстанты.RegisterModificationType_CREATE();
	ИначеЕсли ТипОперации = "Изменить" Тогда
		_Type = ВетисКонстанты.RegisterModificationType_UPDATE();
	ИначеЕсли ТипОперации = "Удалить" Тогда
		_Type = ВетисКонстанты.RegisterModificationType_DELETE();
	КонецЕсли;
	
	_список = Новый Массив;
	
	Для каждого _элемент Из Элементы.Список.ВыделенныеСтроки Цикл
		_список.Добавить(_элемент);
	КонецЦикла;
	
	ВетисMercuryApplicationsСлой1с.ModifyProducerStock(_список, _Type, пОтказ, пОшибка);
	
КонецПроцедуры
