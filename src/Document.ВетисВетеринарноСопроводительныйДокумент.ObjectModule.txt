
Процедура ПриКопировании(ОбъектКопирования)
	
	uuid = Неопределено;
	
	СерияВСД = "";
	НомерВСД = "";
	ДатаВСД  = ТекущаяДата();
	Статус   = Неопределено;
	Тип      = Неопределено;
	
	_сж = ?(Товары.Количество() = 0, Товары.Добавить(), Товары[0]);
	
	//_всд = ?(ВСД.Количество() = 0, ВСД.Добавить(), ВСД[0]);
	
	_осм = ?(РезультатыОсмотра.Количество() = 0, РезультатыОсмотра.Добавить(), РезультатыОсмотра[0]);
	
	_ттн = ?(ТТН.Количество() = 0, ТТН.Добавить(), ТТН[0]);
	_ттн.Серия = "";
	_ттн.Номер = "";
	_ттн.Дата = ТекущаяДата();
	
КонецПроцедуры

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, ТекстЗаполнения, СтандартнаяОбработка)
	
	Получатель = Ветис.ТекущийХС();
	
	ПолучательПредприятие = Ветис.ТекущееПредприятие();
	
	ДатаВСД = ТекущаяДата();
	
	_сж = Товары.Добавить();
	
	_сж.КлючСтроки = 1;
	
	////v1.4
	//_всд = ВСД.Добавить();
	//
	//_всд.НазначениеГруза = Ветис.Настройки_ВСД_НазначениеГруза();
	//
	//_всд.БлагополучиеМестности = Ветис.Настройки_ВСД_БлагополучиеМестности();
	//
	//_всд.КонтрольГосВетврачем = Ветис.Настройки_ВСД_КонтрольГосВетврачем();
	//
	//_всд.ОсобыеОтметки = Ветис.Настройки_ВСД_ОсобыеОтметки();
	
	//v2.0
	_всд = РезультатыОсмотра.Добавить();
	
	_всд.НазначениеГруза = Ветис.Настройки_ВСД_НазначениеГруза();
	
	_всд.БлагополучиеМестности = Ветис.Настройки_ВСД_БлагополучиеМестности();
	
	_всд.Ветсанэкспертиза = Ветис.Настройки_ВСД_ВСЭ();
	
	_всд.КонтрольГосВетврачем = Ветис.Настройки_ВСД_КонтрольГосВетврачем();
	
	_всд.ОсобыеОтметки = Ветис.Настройки_ВСД_ОсобыеОтметки();
	
	//v1.4, v2.0
	_ттн = ТТН.Добавить();
	
	_ттн.Дата = ТекущаяДата();
	
	_ттн.Транспорт = Ветис.Настройки_ТТН_Транспорт();
	
	Если ЗначениеЗаполнено(_ттн.Транспорт) Тогда
		_ттн.Тип            = _ттн.Транспорт.ТипТранспорта;
		_ттн.Посредник      = _ттн.Транспорт.Перевозчик;
		_ттн.СпособХранения = _ттн.Транспорт.СпособХранения;
	Иначе
		_ттн.Тип            = Ветис.Настройки_ТТН_Тип();
		_ттн.Посредник      = Ветис.Настройки_ТТН_Посредник();
		_ттн.СпособХранения = Ветис.Настройки_ТТН_СпособХранения();
	КонецЕсли;
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если ДополнительныеСвойства.Свойство("Загрузка") Тогда
		Возврат;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(uuid) И НЕ Ветис.РазрешенаОтладка() Тогда
		Отказ = Истина;
	КонецЕсли;
	
	Если ПометкаУдаления Тогда
		Возврат;
	КонецЕсли;
	
	Дата = ДатаВСД;
	
	Если Товары.Количество() = 1 Тогда
		SubProduct = Товары[0].SubProduct;
		ProductItem = Товары[0].ProductItem;
		Количество   = Товары[0].Количество;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриЗаписи(Отказ)
	
КонецПроцедуры

Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
КонецПроцедуры
