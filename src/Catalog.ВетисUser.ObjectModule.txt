
Процедура ОбработкаЗаполнения(ДанныеЗаполнения, ТекстЗаполнения, СтандартнаяОбработка)
	
	Если ТипЗнч(ДанныеЗаполнения) = Тип("ОбъектXDTO") Тогда
		ПометкаУдаления = Ложь;
		
		Если ДанныеЗаполнения.Свойства().Получить("fio") = Неопределено ИЛИ ПустаяСтрока(ДанныеЗаполнения.fio) Тогда
			firstName     = СокрЛП(ДанныеЗаполнения.firstName);
			middleName   = СокрЛП(ДанныеЗаполнения.middleName);
			lastName     = СокрЛП(ДанныеЗаполнения.lastName);
		Иначе
			_fio = СокрЛП(ДанныеЗаполнения.fio);
			_pos = Найти(_fio, " ");
			firstName = Лев(_fio, _pos-1);
			_fio = СокрЛ(Сред(_fio, _pos+1));
			_pos = Найти(_fio, " ");
			middleName = Лев(_fio, _pos-1);
			lastName = Сред(_fio, _pos+1);
		КонецЕсли;
		
		Наименование = firstName + " " + middleName + " " + lastName;
		organization = ?(ДанныеЗаполнения.organization = Неопределено, "", СокрЛП(ДанныеЗаполнения.organization.name));
		post         = СокрЛП(ДанныеЗаполнения.post);
		login        = СокрЛП(ДанныеЗаполнения.login);
		phone        = ?(ПустаяСтрока(ДанныеЗаполнения.workPhone), СокрЛП(ДанныеЗаполнения.phone), СокрЛП(ДанныеЗаполнения.workPhone));
		email        = ?(ПустаяСтрока(ДанныеЗаполнения.workEmail), СокрЛП(ДанныеЗаполнения.email), СокрЛП(ДанныеЗаполнения.workEmail));
		
		businessEntity = ВетисDictionaryСлой1с.BusinessEntity(ДанныеЗаполнения.businessEntity);
	КонецЕсли;
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	//Наименование = firstName + ?(middleName = "", "", " " + middleName + ?(lastName = "", "", " " + lastName));
	
КонецПроцедуры
