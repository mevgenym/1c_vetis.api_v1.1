
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("BusinessEntity") Тогда
		Список.ПроизвольныйЗапрос = Истина;
		Список.ТекстЗапроса =
		"ВЫБРАТЬ
		|	_Таблица.Ссылка,
		|	_Таблица.guid,
		|	_Таблица.Наименование,
		|	_Таблица.enterpriseNumber,
		|	_Таблица.addressView,
		|	_Таблица.last,
		|	_Таблица.active
		|ИЗ
		|	Справочник.ВетисEnterprise КАК _Таблица
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ВетисBusinessMembers КАК _BusinessMembers
		|		ПО (_BusinessMembers.Enterprise = _Таблица.Ссылка)
		|			И (_BusinessMembers.BusinessEntity = &BusinessEntity)
		|			И (_BusinessMembers.Использовать)
		|ГДЕ
		|	ИСТИНА
		|	//И _Таблица.last
		|	//И _Таблица.active";
		Список.Параметры.УстановитьЗначениеПараметра("BusinessEntity", Параметры.BusinessEntity);
	КонецЕсли;
	
	//Если Параметры.Свойство("last") Тогда
	//	ВетисОбщегоНазначения.ДобавитьОтбор(Список.Отбор, "last", Параметры.last);
	//КонецЕсли;
	
	//Если Параметры.Свойство("active") Тогда
	//	ВетисОбщегоНазначения.ДобавитьОтбор(Список.Отбор, "active", Параметры.active);
	//КонецЕсли;
	
	Если Параметры.Свойство("Ключ") Тогда
		Элементы.Список.ТекущаяСтрока = Параметры.Ключ;
	КонецЕсли;
	
	ВетисОбщегоНазначения.ДобавитьОтбор(Список.Отбор, "last", Истина);
	
	ВетисОбщегоНазначения.ДобавитьОтбор(Список.Отбор, "active", Истина);
	
КонецПроцедуры
