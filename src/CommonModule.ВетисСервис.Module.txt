
Функция ОбработатьВходящийЗапрос(пЗапрос) Экспорт
	
	_отказ = Ложь;
	
	_Обновление = Истина;
	
	_Сообщение = "";
	
	_Запрос = Десериализовать(пЗапрос.ПолучитьТелоКакСтроку());
	
	Если НЕ ТипЗнч(_Запрос) = Тип("ХранилищеЗначения") Тогда
		Возврат ОтветСервер("Неправильный формат запроса", Истина);
	КонецЕсли;
	
	_Запрос = _Запрос.Получить();
	
	//проверка запроса
	Если НЕ ТипЗнч(_Запрос) = Тип("Структура") Тогда
		Возврат ОтветСервер("Неправильный формат запроса", Истина);
	КонецЕсли;
	
	//обработчик
	
	
	Возврат ОтветСервер(_Сообщение);
	
КонецФункции


Функция ОтветСервер(пСообщение, пОтказ = Ложь, пГотово = Ложь)
	
	_Ответ = Новый Структура("Готово,Отказ,Сообщение", пГотово, пОтказ, пСообщение);
	
	_Ответ = Новый ХранилищеЗначения(_Ответ, Новый СжатиеДанных(9));
	
	Возврат Сериализовать(_Ответ);
	
КонецФункции


Функция Сериализовать(пОбъект) Экспорт
	
	Возврат ВетисОбщегоНазначения.Сериализовать(пОбъект);
	
КонецФункции

Функция Десериализовать(пТекст) Экспорт
	
	Возврат ВетисОбщегоНазначения.Десериализовать(пТекст);
	
КонецФункции
